(this.webpackJsonpinvoices=this.webpackJsonpinvoices||[]).push([[0],{158:function(e,t,n){},226:function(e,t,n){},412:function(e,t,n){},414:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),r=n(39),o=n.n(r),i=(n(226),n(88)),s=n(33),u=n(24),l=n(421),d=n(18),j=n.n(d),b=n(29),p=n(66),v=n.n(p),O=n(44),f=n.n(O),h=n(92),m=n(418),x=n(217);x.b.config({maxCount:1}),v.a.interceptors.response.use(null,(function(e){var t=e.response&&e.response.status>=400&&e.response.status<500;return 401===e.response.status?x.b.error("Authorization Error"):t||("Network Error"===e.message?x.b.info("Please check your network connection"):x.b.error("Oops! Something went wrong!")),Promise.reject(e)}));var g=function(){var e=Object(b.a)(j.a.mark((function e(t,n){var a,c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v.a.get(t);case 3:return a=e.sent,c=a.data,e.abrupt("return",Promise.resolve(c));case 8:return e.prev=8,e.t0=e.catch(0),e.abrupt("return",Promise.reject(e.t0));case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,n){return e.apply(this,arguments)}}(),y=function(){var e=Object(b.a)(j.a.mark((function e(t,n){var a,c,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v.a.post(t,n);case 3:if(a=e.sent,c=a.data,!(r=c.error)){e.next=8;break}return e.abrupt("return",Promise.reject(new Error(r)));case 8:return e.abrupt("return",Promise.resolve(c));case 11:return e.prev=11,e.t0=e.catch(0),e.abrupt("return",Promise.reject(e.t0));case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t,n){return e.apply(this,arguments)}}(),N=function(){var e=Object(b.a)(j.a.mark((function e(t,n){var a,c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v.a.put(t,n);case 3:return a=e.sent,c=a.data,e.abrupt("return",Promise.resolve(c));case 8:return e.prev=8,e.t0=e.catch(0),e.abrupt("return",Promise.reject(e.t0));case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,n){return e.apply(this,arguments)}}(),w={get:g,post:y,put:N,delete:function(){var e=Object(b.a)(j.a.mark((function e(t){var n,a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v.a.delete(t);case 3:return n=e.sent,a=n.data,e.abrupt("return",Promise.resolve(a));case 8:return e.prev=8,e.t0=e.catch(0),e.abrupt("return",Promise.reject(e.t0));case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()},k=(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_API_HOST,n(207)),I=n(61),S=n(6),C=function(){var e=Object(S.jsx)(I.a,{style:{fontSize:32,color:"#0062FF"},spin:!0});return Object(S.jsx)(k.a,{indicator:e})},D=n(215),T=function(e){var t=e.total,n=e.pageSize,a=e.onChange,c=e.current;e.pageSizeOptions,e.onPageSizeChange;return Object(S.jsx)("div",{className:"app-pagination",children:Object(S.jsx)(D.a,{total:t,current:c,pageSize:n,onChange:a,showTotal:function(e,t){var n=Object(u.a)(t,2),a=n[0],c=n[1];return"".concat(a," - ").concat(c," of ").concat(e," items")}})})},A=n(115),P=n(424),M=A.a.Option,E=function(e){var t=e.purchaseInvoice,n=[{title:"Date",dataIndex:"date",key:"date"},{title:"Invoice Number",dataIndex:"invoiceId",key:"invoiceId"},{title:"Customer Name",dataIndex:"customerName",key:"customerName"},{title:"Amount",dataIndex:"totalAmount",key:"totalAmount"},{title:"Actions",dataIndex:"action",key:"action"}];return void 0!==t&&t&&n.splice(2,1,{title:"Type of Product",dataIndex:"productType",key:"productType"}),n},F=n(139),H=n(14),Y=n(417),z="#0062FF",U=function(e){var t=e.color;return Object(S.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"22",height:"21",children:Object(S.jsx)("path",{fill:t,fillRule:"evenodd",d:"M22 15a6 6 0 01-6 6H6a6 6 0 01-6-6V5a3 3 0 013-3h2V1a1 1 0 01.88-1H6a1 1 0 011 .88V2h9V1a1 1 0 01.88-1H17a1 1 0 011 .88V2h1a3 3 0 013 3v10zm-2-5H2v5a4 4 0 004 4h10a4 4 0 004-4v-5zM5 4H3a1 1 0 00-1 1v3h18V5a1 1 0 00-1-1h-1a1 1 0 01-2 0H7a1 1 0 01-2 .12V4z"})})},R=function(e){var t=e.color;return Object(S.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",children:Object(S.jsx)("path",{fill:t,fillRule:"evenodd",d:"M10 8h7a1 1 0 010 2h-7v7a1 1 0 01-2 0v-7H1a1 1 0 010-2h7V1a1 1 0 012 0v7z"})})},W=function(){return Object(S.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"10",height:"7",children:Object(S.jsx)("path",{fill:"#788995",fillRule:"evenodd",d:"M9.68 1.15L5.4 6.5a.5.5 0 01-.78 0L.31 1.15a.5.5 0 01.4-.82h8.58a.5.5 0 01.4.82z"})})},_=function(e){var t=e.color;return Object(S.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"18",children:Object(S.jsx)("path",{fill:t,fillRule:"evenodd",d:"M.34 9.75a1 1 0 01-.1-1.4l7-8A1 1 0 018 0a1 1 0 01.82.43l6.93 7.91a1 1 0 11-1.5 1.32L9 3.67V17a1 1 0 01-.88 1H8a1 1 0 01-1-1V3.65l-5.25 6a1 1 0 01-1.3.18z"})})},B=function(e){var t=e.color;return Object(S.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"4",children:Object(S.jsx)("path",{fill:t,fillRule:"evenodd",d:"M14 2a2 2 0 114 0 2 2 0 01-4 0zM7 2a2 2 0 114 0 2 2 0 01-4 0zM0 2a2 2 0 114 0 2 2 0 01-4 0z"})})},L=function(){return Object(S.jsx)(U,{color:z})},V=function(){return Object(S.jsx)(R,{color:z})},q=function(){return Object(S.jsx)(_,{color:z})},K=function(){return Object(S.jsx)(B,{color:"#92929D"})},J=function(e){return Object(S.jsx)(Y.a,Object(H.a)({component:L},e))},Q=function(e){return Object(S.jsx)(Y.a,Object(H.a)({component:V},e))},$=function(e){return Object(S.jsx)(Y.a,Object(H.a)({component:W},e))},G=function(e){return Object(S.jsx)(Y.a,Object(H.a)({component:q},e))},X=function(e){return Object(S.jsx)(Y.a,Object(H.a)({component:K},e))},Z=function(e){var t=e.onSelect,n=e.options,a=void 0===n?[]:n,c=Object(S.jsx)(h.a,{onClick:t,children:a});return Object(S.jsx)(F.a,{overlayStyle:{minWidth:"7.5em"},overlay:c,trigger:["click"],getPopupContainer:function(e){return e.parentNode},children:Object(S.jsx)(X,{className:"action-dots"})})},ee=f()().format("YYYY-MM-DD"),te=10,ne=[72,75,78,81],ae=[16,17,18,19,24,26,28,30,32,34,36,38],ce="DD/MM/YYYY",re=function(e){return Object(S.jsxs)("div",{className:"status nowrap",children:[Object(S.jsx)("span",{className:"app-dot",style:{background:"#FF0022"}}),Object(S.jsx)("span",{className:"status-text",children:e})]})},oe=function(e){var t=e.reFetch,n=e.goToTab,c=(e.onUpdate,Object(s.f)()),r=Object(a.useState)([]),o=Object(u.a)(r,2),i=o[0],l=o[1],d=Object(a.useState)(0),p=Object(u.a)(d,2),v=p[0],O=(p[1],Object(a.useState)(!0)),x=Object(u.a)(O,2),g=x[0],y=x[1],N=Object(a.useState)(1),k=Object(u.a)(N,2),I=k[0],D=k[1],A=Object(a.useState)(null),P=Object(u.a)(A,2),M=P[0],F=P[1],H=Object(a.useMemo)((function(){return E({purchaseInvoice:!1})}),[]);Object(a.useEffect)(Object(b.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:y(!0),z(),Y();case 3:case"end":return e.stop()}}),e)}))),[t]);var Y=function(){var e=Object(b.a)(j.a.mark((function e(t){var n,a,c,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t||v,a="invoice/getInvoices?limit=".concat(te,"&offset=").concat(n),e.prev=2,e.next=5,w.get(a);case 5:c=e.sent,r=c.data,console.log("data",r),l(r),y(!1),e.next=14;break;case 12:e.prev=12,e.t0=e.catch(2);case 14:case"end":return e.stop()}}),e,null,[[2,12]])})));return function(t){return e.apply(this,arguments)}}(),z=function(){var e=Object(b.a)(j.a.mark((function e(){var t,n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"invoice/getInvoicesCount",e.prev=1,e.next=4,w.get("invoice/getInvoicesCount");case 4:t=e.sent,n=t.data,F(n),e.next=11;break;case 9:e.prev=9,e.t0=e.catch(1);case 11:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}(),U=function(){var e=Object(b.a)(j.a.mark((function e(t,a){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"edit"==t&&n("2",!0,a);case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),R=Object(a.useMemo)((function(){return i.map((function(e){var t=e.invoiceId,n=e.invoiceDate,a=e.totalAmount,r=e.customerName,o=e.dueDate,i=e.dcNo,s=e.departmentStatus,u=e.pendingAmount,l=e.billingAddress,d=[Object(S.jsx)(h.a.Item,{children:"Edit"},"edit")];return{key:t,dcNo:i,customerName:r,totalAmount:a,billingAddress:l,pendingAmount:u,status:re(s),dueDate:f()(o).format(ce),date:f()(n).format(ce),invoiceId:Object(S.jsx)("span",{className:"app-link",onClick:function(){return function(e){return c.push("/invoices/view",{invoice:e})}(e)},children:t}),action:Object(S.jsx)(Z,{options:d,onSelect:function(t){var n=t.key;return U(n,e)}})}}))}),[i]);return Object(S.jsxs)("div",{className:"stock-delivery-container",children:[Object(S.jsx)("div",{className:"app-table dispatch-table",children:Object(S.jsx)(m.a,{loading:{spinning:g,indicator:Object(S.jsx)(C,{})},dataSource:R,columns:H,pagination:!1,scroll:{x:!0}})}),!!M&&Object(S.jsx)(T,{total:M,pageSize:te,current:I,onChange:function(e){D(e),Y((e-1)*te)}})]})},ie="DD/MM/YYYY",se=function(e){return Object(S.jsxs)("div",{className:"status nowrap",children:[Object(S.jsx)("span",{className:"app-dot",style:{background:"#FF0022"}}),Object(S.jsx)("span",{className:"status-text",children:e})]})},ue=function(e){var t=e.reFetch,n=e.goToTab,c=(e.onUpdate,Object(s.f)()),r=Object(a.useState)([]),o=Object(u.a)(r,2),i=o[0],l=o[1],d=Object(a.useState)(0),p=Object(u.a)(d,2),v=p[0],O=(p[1],Object(a.useState)(!0)),x=Object(u.a)(O,2),g=x[0],y=x[1],N=Object(a.useState)(1),k=Object(u.a)(N,2),I=k[0],D=k[1],A=Object(a.useState)(null),P=Object(u.a)(A,2),M=P[0],F=P[1],H=Object(a.useMemo)((function(){return E({purchaseInvoice:!0})}),[]);Object(a.useEffect)(Object(b.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:y(!0),z(),Y();case 3:case"end":return e.stop()}}),e)}))),[t]);var Y=function(){var e=Object(b.a)(j.a.mark((function e(t){var n,a,c,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t||v,a="purchaseInvoice/getInvoices?limit=".concat(te,"&offset=").concat(n),e.prev=2,e.next=5,w.get(a);case 5:c=e.sent,r=c.data,l(r),y(!1),e.next=13;break;case 11:e.prev=11,e.t0=e.catch(2);case 13:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(t){return e.apply(this,arguments)}}(),z=function(){var e=Object(b.a)(j.a.mark((function e(){var t,n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"purchaseInvoice/getInvoicesCount",e.prev=1,e.next=4,w.get("purchaseInvoice/getInvoicesCount");case 4:t=e.sent,n=t.data,F(n),e.next=11;break;case 9:e.prev=9,e.t0=e.catch(1);case 11:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}(),U=function(){var e=Object(b.a)(j.a.mark((function e(t,a){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"edit"==t&&n("4",!0,a);case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),R=Object(a.useMemo)((function(){return i.map((function(e){var t=e.invoiceId,n=e.invoiceDate,a=e.totalAmount,r=e.customerName,o=e.dueDate,i=e.dcNo,s=e.departmentStatus,u=e.pendingAmount,l=e.billingAddress,d=e.productType,j=[Object(S.jsx)(h.a.Item,{children:"Edit"},"edit")];return{key:t,dcNo:i,customerName:r,totalAmount:a,billingAddress:l,pendingAmount:u,productType:d,status:se(s),dueDate:f()(o).format(ie),date:f()(n).format(ie),invoiceId:Object(S.jsx)("span",{className:"app-link",onClick:function(){return function(e){return c.push("/invoices/view",{invoice:e,type:"image",purchaseInvoice:!0})}(e)},children:t}),action:Object(S.jsx)(Z,{options:j,onSelect:function(t){var n=t.key;return U(n,e)}})}}))}),[i]);return Object(S.jsxs)("div",{className:"stock-delivery-container",children:[Object(S.jsx)("div",{className:"app-table dispatch-table",children:Object(S.jsx)(m.a,{loading:{spinning:g,indicator:Object(S.jsx)(C,{})},dataSource:R,columns:H,pagination:!1,scroll:{x:!0}})}),!!M&&Object(S.jsx)(T,{total:M,pageSize:te,current:I,onChange:function(e){D(e),Y((e-1)*te)}})]})},le=n(49),de=n(163),je=n(116),be=n(423),pe=function(e){var t=e.name,n=e.error,a=e.errClass,c=void 0===a?"":a,r=e.mandatory;return Object(S.jsxs)("div",{children:[Object(S.jsx)("label",{className:"app-input-label-name ".concat(r?"label-mandatory":""),children:t}),n&&Object(S.jsx)("span",{className:"app-label-error ".concat(c),children:n})]})},ve=n(422),Oe=function(e){var t=e.disabled,n=e.maxLength,a=e.type,c=e.value,r=e.placeholder,o=e.uppercase,i=e.error,s=void 0===i?"":i,u=e.onChange,l=e.onBlur,d=function(e){u(o?e.toUpperCase():e)},j=function(e){l&&l(o?e.toUpperCase():e)};return Object(S.jsx)(ve.a,{size:"large",type:a,disabled:t,maxLength:n,value:c,placeholder:r,className:s&&"app-input-error",onBlur:function(e){var t=e.target.value;return j(t)},onChange:function(e){var t=e.target.value;return d(t)},autoComplete:"none"})},fe=n(213),he=n.n(fe),me=n(126),xe=n.n(me),ge=(n(327),xe()(he.a)),ye=function(e){var t=e.disabled,n=e.allowClear,a=e.value,c=e.placeholder,r=void 0===c?"Select Date":c,o=(e.track,e.onChange),i=e.error,s=e.format,u=void 0===s?"DD/MM/YYYY":s,l=e.disabledDate,d=e.open,j=e.onOpenChange,b=e.style,p=e.className,v=e.suffixIcon,O=void 0===v?Object(S.jsx)(J,{}):v,h=e.getPopupContainer,m=void 0===h?function(e){return e.parentNode}:h;return Object(S.jsx)(ge,{open:d,size:"large",style:b,format:u,disabled:t,suffixIcon:O,onChange:function(e){o(e)},placeholder:r,disabledDate:l,onOpenChange:j,value:a?f()(a):null,allowClear:n,className:"".concat(p," ").concat(i&&"app-input-error"),getPopupContainer:m})},Ne=function(e){var t=e.data,n=e.errors,a=e.onChange,c=t.customerName,r=(t.phoneNumber,t.address,t.gstNo,t.place,t.invoiceId),o=t.invoiceDate;t.gstPercentage;return Object(S.jsxs)("div",{className:"app-form-container invoice-form-container",children:[Object(S.jsxs)("div",{className:"row",children:[Object(S.jsxs)("div",{className:"input-container",children:[Object(S.jsx)(pe,{name:"Invoice Number"}),Object(S.jsx)(Oe,{value:r,disabled:!0,placeholder:"Invoice Number"})]}),Object(S.jsxs)("div",{className:"input-container",children:[Object(S.jsx)(pe,{name:"Invoice Date",error:n.invoiceDate,mandatory:!0}),Object(S.jsx)(ye,{track:!0,value:o,error:n.invoiceDate,onChange:function(e){return a(e,"invoiceDate")}})]})]}),Object(S.jsx)("div",{className:"row",children:Object(S.jsxs)("div",{className:"input-container",children:[Object(S.jsx)(pe,{name:"Customer Name",error:n.customerName,mandatory:!0}),Object(S.jsx)(Oe,{value:c,error:n.customerName,placeholder:"customerName",onChange:function(e){return a(e,"customerName")}})]})})]})},we=function(e){var t=e.value,n=e.size;return Object(S.jsx)("span",{className:"app-input-value-".concat(n),children:t})},ke=function(e){var t=e.text,n=e.onClick,a=e.icon,c=e.suffix,r=e.className,o=void 0===r?"":r,i=e.style,s=e.disabled;return Object(S.jsxs)("div",{className:"app-btn ".concat(o," ").concat(s?"disabled":""),onClick:n,style:i,children:[a&&Object(S.jsx)("span",{className:"prefix",children:a}),Object(S.jsx)("span",{className:"text",children:t}),c&&Object(S.jsx)("span",{className:"suffix",children:c})]})},Ie=n(420),Se=function(e,t){var n=e.quantity,a=e.productPrice,c=e.productHeight,r=e.productWidth,o=e.doubleAmount,i=0,s=0;return c&&r&&(s=Number((c*r/144).toFixed(2))),n&&a&&(i=Number((s*a*n).toFixed(2))),1==o&&(i*=2,s*=2),{amount:i,squareFeet:s}},Ce=function(e){return"object"===typeof e&&null!==e?!Object.keys(e).length:Array.isArray(e)?!e.length:void 0},De=function e(t,n,a,c){if(c<=t[n])return t[n];if(c>t[a])return c;var r=Math.round((n+a)/2);return t[r]==c?t[r]:t[r]<c?r+1<=a&&c<=t[r+1]?t[r+1]:e(t,r+1,a,c):r-1>=n&&c>t[r-1]?t[r]:e(t,n,r-1,c)},Te=function(e){if(e&&!String(e).match(/^[0-9.-]+$/))return"Enter digits only";return""},Ae=function(e,t){var n={},a="Required",c=e.customerName,r=e.productType,o=e.invoiceMedia,i=e.totalAmount,s=(e.place,e.invoiceId),u=(e.gstPercentage,e.invoiceDate),l=e.products;if(!c&&t&&(n.customerName=a),r||t||(n.productType=a),o||t||(n.invoiceMedia=a),i||t||(n.totalAmount=a),s||(n.invoiceId=a),u||(n.invoiceDate=a),t&&Ce(l))n.products="Atleast 1 product is required";else if(t){var d=function(e){for(var t="",n=e.length,a=0;a<n;a++){var c=e[a],r=c.productName,o=c.productHeight,i=c.productWidth,s=c.quantity,u=c.productPrice;if(!r||!o||!i||!s||!u){t="One or more fields in the table are empty";break}}return t}(l);d&&(n.products=d)}return n},Pe=["index"],Me=["title","editable","children","dataIndex","record","onSave","inputType","options"],Ee=c.a.createContext(null),Fe=function(e){e.index;var t=Object(je.a)(e,Pe),n=Ie.a.useForm(),a=Object(u.a)(n,1)[0];return Object(S.jsx)(Ie.a,{form:a,component:!1,children:Object(S.jsx)(Ee.Provider,{value:a,children:Object(S.jsx)("tr",Object(H.a)({},t))})})},He=function(e){e.title;var t=e.editable,n=e.children,c=e.dataIndex,r=e.record,o=e.onSave,i=e.inputType,s=e.options,l=void 0===s?[]:s,d=Object(je.a)(e,Me),p=Object(a.useState)(!1),v=Object(u.a)(p,2),O=v[0],f=v[1],h=Object(a.useRef)(null),m=Object(a.useContext)(Ee);Object(a.useEffect)((function(){O&&"select"!==i&&h.current.focus()}),[O]);var x=function(){f(!O),m.setFieldsValue(Object(le.a)({},c,r[c]))},g=function(){var e=Object(b.a)(j.a.mark((function e(){var t,n,a,i,s;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m.validateFields();case 3:if(t=e.sent,x(),n=Object.keys(t)[0],a=t[n],"actualHeight"==n?a=De(ne,0,ne.length-1,t[n]):"actualWidth"==n&&(a=De(ae,0,ae.length,t[n])),i=Object(le.a)({},n,t[n]),"actualHeight"!=n&&"actualWidth"!=n||(s="actualHeight"==n?"productHeight":"actualWidth"==n?"productWidth":null,i=Object(H.a)(Object(H.a)({},i),{},Object(le.a)({},s,a))),!("doubleAmount"==n&&t[n]>1)){e.next=12;break}return e.abrupt("return",0);case 12:o(Object(H.a)(Object(H.a)({},r),i),c),e.next=17;break;case 15:e.prev=15,e.t0=e.catch(0);case 17:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(){return e.apply(this,arguments)}}(),y=n;return t&&(y=O?Object(S.jsx)(Ie.a.Item,{style:{margin:0},name:c,rules:[{validator:function(){var e=Object(b.a)(j.a.mark((function e(t,n){var a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a="select"!==i&&"designNo"!=c?Te(n):"",0===n||n?"quantity"!==c&&"productPrice"!==c||0==n&&(a="Invalid"):a="Required",!a){e.next=4;break}throw new Error(a);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}],children:"select"===i?Object(S.jsx)(A.a,{onBlur:g,onSelect:g,placeholder:"Select",suffixIcon:Object(S.jsx)($,{}),getPopupContainer:function(e){return e.parentNode},children:l}):Object(S.jsx)(ve.a,{ref:h,onPressEnter:g,onBlur:g})}):Object(S.jsx)("div",{className:"editable-cell-value-wrap",onClick:x,children:n})),Object(S.jsx)("td",Object(H.a)(Object(H.a)({},d),{},{children:y}))},Ye=function(e){var t=e.dataSource,n=e.productOptions,c=e.footerValues,r=e.onDelete,o=e.errors,i=e.onAdd,s=e.onSave,u=e.purchaseInvoice,l=(c.subTotal,c.totalAmount),d=(c.gst,Object(a.useMemo)((function(){return function(e){var t=e.purchaseInvoice,n=e.onDelete,a=e.dataSource,c=[{title:"Product Details",dataIndex:"productName",width:"20%",editable:!0,inputType:"select",options:e.productOptions},{title:"Design No",dataIndex:"designNo",editable:!0},{title:"Quantity",dataIndex:"quantity",editable:!0},{title:"Rate per SQ.FT",dataIndex:"productPrice",editable:!0},{title:"Amount",dataIndex:"amount"},{title:"Action",dataIndex:"action",render:function(e,t){return a.length>=1?Object(S.jsx)(P.a,{title:"Sure to delete?",onConfirm:function(){return n(t.key)},children:Object(S.jsx)("a",{children:"Delete"})}):null}}];return t&&(c.splice(2,0,{title:"Actual Height",dataIndex:"actualHeight",key:"actualHeight",editable:!0}),c.splice(3,0,{title:"Height",dataIndex:"productHeight",key:"productHeight"}),c.splice(4,0,{title:"Actual Width",dataIndex:"actualWidth",key:"actualWidth",editable:!0}),c.splice(5,0,{title:"Width",dataIndex:"productWidth",key:"productWidth"}),c.splice(8,0,{title:"Double Amount",dataIndex:"doubleAmount",key:"doubleAmount",inputType:"switch",editable:!0})),c}({purchaseInvoice:u,onDelete:r,dataSource:t,productOptions:n})}),[n,t])),j={body:{row:Fe,cell:He}},b=d.map((function(e){var t=e.editable,n=e.inputType,a=e.dataIndex,c=e.title,r=e.options;return t?Object(H.a)(Object(H.a)({},e),{},{onCell:function(e){return{record:e,editable:t,inputType:n,dataIndex:a,title:c,options:r,onSave:s}}}):e}));return Object(S.jsxs)("div",{className:"product-table-container",children:[Object(S.jsx)(pe,{error:o.products}),Object(S.jsx)(m.a,{pagination:!1,className:"app-table",components:j,rowClassName:function(){return"editable-row"},dataSource:t,columns:b,scroll:{x:!0}}),Object(S.jsxs)("div",{className:"table-footer-container",children:[Object(S.jsx)(ke,{onClick:i,text:"Add Another Product",className:"app-add-new-btn",icon:Object(S.jsx)(Q,{})}),Object(S.jsx)("div",{className:"table-footer",children:Object(S.jsxs)("div",{className:"input-container",children:[Object(S.jsx)(we,{size:"larger",value:"Total (\u20b9)"}),Object(S.jsx)(we,{size:"larger",value:l||0})]})})]})]})},ze={display:"flex",justifyContent:"center",alignItems:"center"},Ue=function(e){var t=e.content,n=e.style;return Object(S.jsx)("div",{style:Object(H.a)(Object(H.a)({},ze),n),className:"no-content",children:t})},Re=["products"],We=function(e){return e?"invoice/updateInvoice":"invoice/createInvoice"},_e=function(){return[{key:Object(be.a)().slice(0,7),productName:null,quantity:1,productPrice:0,discount:0,tax:18,amount:0,cgst:0,sgst:0,igst:0,designNo:0,productHeight:0,productWidth:0,doubleAmount:0}]},Be=function(e,t){var n=0;e.map((function(e){n=Number(n+Number(e.amount))}));var a=Math.round(n);return{subTotal:n,totalAmount:a}},Le=function(e){var t=e.goToTab,n=e.editMode,c=e.invoiceData,r=void 0===c?{}:c,o=e.activeTab,i=Object(a.useMemo)((function(){return{invoiceDate:ee,gstPercentage:18}}),[]),s=r._id,l=Object(a.useState)(i),d=Object(u.a)(l,2),p=d[0],O=d[1],h=Object(a.useState)({}),m=Object(u.a)(h,2),g=m[0],y=m[1],N=Object(a.useState)(!1),k=Object(u.a)(N,2),I=k[0],D=k[1],T=Object(a.useState)([]),A=Object(u.a)(T,2),P=A[0],E=A[1],F=Object(a.useState)(n?[]:_e),Y=Object(u.a)(F,2),z=Y[0],U=Y[1],R=Object(a.useState)(!1),W=Object(u.a)(R,2),_=W[0],B=W[1],L=Object(a.useState)([]),V=Object(u.a)(L,2),q=V[0],K=V[1],J=Object(a.useState)(!1),Q=Object(u.a)(J,2),$=Q[0],G=Q[1],X=p.gstPercentage,Z=Object(a.useMemo)((function(){return function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).map((function(e){return Object(S.jsx)(M,{value:e.productName,children:e.productName},e._id)}))}(P)}),[P]),te=Object(a.useMemo)((function(){return Be(z,X)}),[z]);Object(a.useEffect)((function(){ce()}),[n]),Object(a.useEffect)((function(){n?ne():ae(),se()}),[o]),Object(a.useEffect)((function(){var e=z.map((function(e){return Object(H.a)(Object(H.a)({},e),Se(e))}));U(e)}),[]);var ne=function(){var e=Object(b.a)(j.a.mark((function e(){var t,n,a,c,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="invoice/getInvoiceById/".concat(s),e.prev=1,G(!0),e.next=5,w.get(t);case 5:n=e.sent,a=n.products,c=Object(je.a)(n,Re),r=a.map((function(e){return Object(H.a)(Object(H.a)({},e),Se(e))})),U(r),O(c),G(!1),e.next=15;break;case 13:e.prev=13,e.t0=e.catch(1);case 15:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(){return e.apply(this,arguments)}}(),ae=function(){var e=Object(b.a)(j.a.mark((function e(){var t,n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"invoice/getInvoiceId",e.prev=1,e.next=4,w.get("invoice/getInvoiceId");case 4:t=e.sent,n=t.invoiceId,O((function(e){return Object(H.a)(Object(H.a)({},e),{},{invoiceId:n})})),e.next=11;break;case 9:e.prev=9,e.t0=e.catch(1);case 11:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}(),ce=function(){var e=Object(b.a)(j.a.mark((function e(){var t,n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"invoice/getProducts",e.prev=1,e.next=4,w.get("invoice/getProducts");case 4:t=e.sent,n=t.data,E(n),e.next=11;break;case 9:e.prev=9,e.t0=e.catch(1);case 11:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}(),re=function(){return y((function(e){return Object(H.a)(Object(H.a)({},e),{},{products:""})}))},oe=function(e,t){if("productName"===t){var n=P.find((function(t){return t.productName===e.productName})),a=n.tax,c=n.price,r=Object(H.a)(Object(H.a)({},e),{},{productPrice:c,tax:a});e=Object(H.a)(Object(H.a)({},r),Se(r))}else{var o=Object(H.a)({},e);e=Object(H.a)(Object(H.a)({},o),Se(o))}return e},ie=function(){var e=Object(b.a)(j.a.mark((function e(){var a,c,r,o,i;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=Ae(Object(H.a)(Object(H.a)({},p),{},{products:z}),!0),c=te.totalAmount,r=p.invoiceDate,Ce(a)){e.next=8;break}return B(!0),setTimeout((function(){return B(!1)}),820),y(a),e.abrupt("return");case 8:return o=Object(H.a)(Object(H.a)({},p),{},{invoiceDate:f()(r).format("YYYY-MM-DD"),products:z,totalAmount:c}),i=We(n),e.prev=10,D(!0),e.next=14,w.post(i,o);case 14:n?(x.b.success("Updated successfully"),se(),t("1")):(x.b.success("created successfully"),se(),t("1"),ae()),e.next=21;break;case 17:e.prev=17,e.t0=e.catch(10),x.b.destroy(),v.a.isCancel(e.t0)||D(!1);case 21:case"end":return e.stop()}}),e,null,[[10,17]])})));return function(){return e.apply(this,arguments)}}(),se=function(){D(!1),O(i),U(_e),y({})};return $?Object(S.jsx)(Ue,{content:Object(S.jsx)(C,{})}):Object(S.jsxs)("div",{className:"stock-delivery-container",children:[Object(S.jsx)(Ne,{data:p,errors:g,onChange:function(e,t){O((function(n){return Object(H.a)(Object(H.a)({},n),{},Object(le.a)({},t,e))})),y((function(e){return Object(H.a)(Object(H.a)({},e),{},Object(le.a)({},t,""))}))}}),Object(S.jsx)(Ye,{errors:g,dataSource:z,footerValues:te,productOptions:Z,onAdd:function(){re();var e=Object(H.a)(Object(H.a)({},_e()[0]),{},{key:Object(be.a)().slice(0,7),isNew:n?1:0});U([].concat(Object(de.a)(z),[e]))},onSave:function(e,t){re();var n=oe(e,t),a=Object(de.a)(z),c=a.findIndex((function(t){return e.key===t.key})),r=a[c];a.splice(c,1,Object(H.a)(Object(H.a)({},r),n)),U(a)},onDelete:function(e){re(),n&&(q.push(e),K(q));var t=z.filter((function(t){return t.key!==e}));U(t)},purchaseInvoice:!0}),Object(S.jsx)("div",{className:"app-footer-buttons-container",children:Object(S.jsx)(ke,{onClick:ie,disabled:I,className:"\n                    app-create-btn footer-btn\n                    ".concat(_?"app-shake":"","\n                "),text:n?"Update":"Save"})})]})},Ve=n(419),qe=n(220),Ke=function(e){var t=e.data,n=e.errors,a=e.onChange,c=e.onUpload,r=t.invoiceId,o=t.invoiceDate,i=t.productType,s=t.totalAmount,u=t.invoiceMedia;return Object(S.jsxs)("div",{className:"app-form-container invoice-form-container",children:[Object(S.jsxs)("div",{className:"row",children:[Object(S.jsxs)("div",{className:"input-container",children:[Object(S.jsx)(pe,{name:"Invoice Number",error:n.invoiceId,mandatory:!0}),Object(S.jsx)(Oe,{value:r,onChange:function(e){return a(e,"invoiceId")},placeholder:"Invoice Number"})]}),Object(S.jsxs)("div",{className:"input-container",children:[Object(S.jsx)(pe,{name:"Invoice Date",error:n.invoiceDate,mandatory:!0}),Object(S.jsx)(ye,{track:!0,value:o,error:n.invoiceDate,onChange:function(e){return a(e,"invoiceDate")}})]})]}),Object(S.jsxs)("div",{className:"row",children:[Object(S.jsxs)("div",{className:"input-container",children:[Object(S.jsx)(pe,{name:"Type of product",error:n.productType,mandatory:!0}),Object(S.jsx)(Oe,{value:i,onChange:function(e){return a(e,"productType")},placeholder:"Enter Product Type"})]}),Object(S.jsxs)("div",{className:"input-container",children:[Object(S.jsx)(pe,{name:"Amount",error:n.totalAmount,mandatory:!0}),Object(S.jsx)(Oe,{value:s,onChange:function(e){return a(e,"totalAmount")},placeholder:"Enter Amount"})]})]}),Object(S.jsx)("div",{className:"row",children:Object(S.jsxs)("div",{className:"input-container",children:[Object(S.jsx)(pe,{name:"Upload Invoice",error:n.invoiceMedia,mandatory:!0}),Object(S.jsx)("div",{className:"uploadImage",children:Object(S.jsx)(Ve.a,{customRequest:function(e){return c(e.file,"invoiceMedia")},className:"image-uploader",accept:"image/*",showUploadList:!1,children:u?Object(S.jsx)("img",{src:u,alt:"",className:"avatar"}):Object(S.jsx)(qe.a,{className:"avatar-uploader-trigger"})})})]})})]})},Je=function(e){return e?"purchaseInvoice/updateInvoice":"purchaseInvoice/createInvoice"},Qe=function(e){var t=e.goToTab,n=e.editMode,c=e.invoiceData,r=void 0===c?{}:c,o=e.activeTab,i=Object(a.useMemo)((function(){return{invoiceDate:ee,gstPercentage:18}}),[]),s=r._id,l=Object(a.useState)(i),d=Object(u.a)(l,2),p=d[0],v=d[1],O=Object(a.useState)({}),h=Object(u.a)(O,2),m=h[0],g=h[1],y=Object(a.useState)(!1),N=Object(u.a)(y,2),k=N[0],I=N[1],D=Object(a.useState)(!1),T=Object(u.a)(D,2),A=T[0],P=T[1],M=Object(a.useState)(!1),E=Object(u.a)(M,2),F=E[0],Y=E[1];Object(a.useEffect)((function(){n&&z()}),[n]),Object(a.useEffect)((function(){R()}),[o]);var z=function(){var e=Object(b.a)(j.a.mark((function e(){var t,n,a,c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="purchaseInvoice/getInvoiceById/".concat(s),e.prev=1,Y(!0),e.next=5,w.get(t);case 5:n=e.sent,a=n.data,c=Object.assign({},a),v(c),Y(!1),e.next=14;break;case 12:e.prev=12,e.t0=e.catch(1);case 14:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(){return e.apply(this,arguments)}}(),U=function(){var e=Object(b.a)(j.a.mark((function e(){var a,c,r,o;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=Ae(Object(H.a)({},p),!1),console.log(a),c=p.invoiceDate,Ce(a)){e.next=8;break}return P(!0),setTimeout((function(){return P(!1)}),820),g(a),e.abrupt("return");case 8:return r=Object(H.a)(Object(H.a)({},p),{},{invoiceDate:f()(c).format("YYYY-MM-DD")}),o=Je(n),e.prev=10,I(!0),e.next=14,w.post(o,r);case 14:n?(x.b.success("Updated successfully"),R(),t("3")):(x.b.success("created successfully"),R(),t("3")),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(10),x.b.destroy();case 20:case"end":return e.stop()}}),e,null,[[10,17]])})));return function(){return e.apply(this,arguments)}}(),R=function(){I(!1),v(i),g({})};return F?Object(S.jsx)(Ue,{content:Object(S.jsx)(C,{})}):Object(S.jsxs)("div",{className:"stock-delivery-container",children:[Object(S.jsx)(Ke,{data:p,errors:m,onChange:function(e,t){v((function(n){return Object(H.a)(Object(H.a)({},n),{},Object(le.a)({},t,e))})),g((function(e){return Object(H.a)(Object(H.a)({},e),{},Object(le.a)({},t,""))}))},onUpload:function(e,t){!function(e,t){var n=new FileReader;n.addEventListener("load",(function(){return t(n.result)})),n.readAsDataURL(e)}(e,function(){var e=Object(b.a)(j.a.mark((function e(n){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:v((function(e){return Object(H.a)(Object(H.a)({},e),{},Object(le.a)({},t,n))})),g((function(e){return Object(H.a)(Object(H.a)({},e),{},Object(le.a)({},t,""))}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}),Object(S.jsx)("div",{className:"app-footer-buttons-container",children:Object(S.jsx)(ke,{onClick:U,disabled:k,className:"\n                    app-create-btn footer-btn\n                    ".concat(A?"app-shake":"","\n                "),text:n?"Update":"Save"})})]})},$e=(n(158),l.a.TabPane),Ge=function(){var e=Object(s.h)().tab,t=void 0===e?"1":e,n=Object(a.useState)(t),c=Object(u.a)(n,2),r=c[0],o=c[1],i=Object(a.useState)(!1),d=Object(u.a)(i,2),j=d[0],b=d[1],p=Object(a.useState)(!1),v=Object(u.a)(p,2),O=v[0],f=v[1],h=Object(a.useState)(!1),m=Object(u.a)(h,2),x=m[0],g=m[1],y=Object(a.useState)({}),N=Object(u.a)(y,2),w=N[0],k=N[1],I=function(e,t,n){o(e),b(!j),"2"==e&&t||"4"==e&&t?(g(!0),k(n)):g(!1)};return Object(S.jsx)(a.Fragment,{children:Object(S.jsx)("div",{className:"invoice-content",children:Object(S.jsx)("div",{className:"app-tabs-container",children:Object(S.jsxs)(l.a,{onChange:function(e){o(e)},activeKey:r,children:[Object(S.jsx)($e,{tab:"Sales Dashboard",children:Object(S.jsx)(oe,{reFetch:j,goToTab:I,onUpdate:function(){return f(!O)}})},"1"),Object(S.jsx)($e,{tab:"Create Sales Bill",children:Object(S.jsx)(Le,{editMode:x,invoiceData:w,activeTab:r,goToTab:I})},"2"),Object(S.jsx)($e,{tab:"Purchase Dashboard",children:Object(S.jsx)(ue,{reFetch:j,goToTab:I,onUpdate:function(){return f(!O)}})},"3"),Object(S.jsx)($e,{tab:"Purchase Entry",children:Object(S.jsx)(Qe,{editMode:x,activeTab:r,invoiceData:w,goToTab:I})},"4")]})})})})},Xe=(n(412),function(e){var t=e.onClick;return Object(S.jsxs)("div",{className:"back-button-container",onClick:t,children:[Object(S.jsx)(G,{className:"arrow"}),Object(S.jsx)("span",{className:"text",children:"Back"})]})}),Ze=function(e){var t=e.onClick;return Object(S.jsx)("div",{className:"app-simple-header manage-invoices-header",children:Object(S.jsx)("div",{className:"left",children:Object(S.jsx)(Xe,{onClick:t})})})},et=function(e){var t=e.data,n=e.isLoading,a=e.type,c=t.invoicePdf,r=t.invoiceMedia,o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"image/png";return Ce(e)?"":"data:".concat(t,";base64,")+btoa(new Uint8Array(e).reduce((function(e,t){return e+String.fromCharCode(t)}),""))}(null===c||void 0===c?void 0:c.data,"application/pdf");return Object(S.jsx)("div",{className:"content-body",children:n?Object(S.jsx)(Ue,{content:Object(S.jsx)(C,{})}):"image"==a?Object(S.jsx)("img",{src:r}):Object(S.jsx)("iframe",{src:o,width:"100%",height:"123.5%"})})},tt=function(){var e=Object(s.f)(),t=Object(s.g)(),n=t.state,c=(t.pathname,Object(a.useState)(!1)),r=Object(u.a)(c,2),o=r[0],i=r[1],l=Object(a.useState)(n?n.invoice:{}),d=Object(u.a)(l,2),p=d[0],v=d[1];Object(a.useEffect)((function(){n&&O(n.invoice._id)}),[]);var O=function(){var e=Object(b.a)(j.a.mark((function e(t){var a,c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="/invoice/getInvoiceById/".concat(t),n&&n.purchaseInvoice&&(a="/purchaseInvoice/getInvoiceById/".concat(t)),e.prev=2,i(!0),e.next=6,w.get(a);case 6:c=e.sent,v(c),i(!1),e.next=13;break;case 11:e.prev=11,e.t0=e.catch(2);case 13:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(t){return e.apply(this,arguments)}}();return Object(S.jsxs)("div",{className:"manage-invoice",children:[Object(S.jsx)(Ze,{onClick:function(){return e.goBack()}}),Object(S.jsx)("div",{className:"invoice-manage-content",children:Object(S.jsx)("div",{className:"right-panel",children:Object(S.jsx)(et,{isLoading:o,data:p,onPrint:function(e){e.preventDefault(),window.print()},type:n&&n.type})})})]})},nt=function(){return Object(S.jsx)(i.a,{children:Object(S.jsxs)(s.c,{children:[Object(S.jsx)(s.a,{exact:!0,path:"/",render:function(e){return Object(S.jsx)(Ge,{})}}),Object(S.jsx)(s.a,{exact:!0,path:"/invoices/view",render:function(e){return Object(S.jsx)(tt,{})}})]})})},at=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,425)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,r=t.getLCP,o=t.getTTFB;n(e),a(e),c(e),r(e),o(e)}))};n(413);o.a.render(Object(S.jsx)(c.a.StrictMode,{children:Object(S.jsx)(nt,{})}),document.getElementById("root")),at()}},[[414,1,2]]]);